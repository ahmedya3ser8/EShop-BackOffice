<app-main-title [title]="'Brand Lists'" />

<div class="flex justify-between items-center mb-10">

  <div class="float_field w-1/2">
    <input type="search" (input)="onSearch()" [(ngModel)]="keyword" class="input_field h-12" id="search" placeholder=" " />
    <label for="search" class="label_field"> search by name </label>
  </div>

  <button routerLink="/brands/add" type="button" class="bg-gray-600 text-white rounded-lg p-3 cursor-pointer w-40 transition duration-300 hover:bg-gray-700">
    add new brand
  </button>

</div>

<p-table
  [value]="brands"
  [paginator]="true"
  [rows]="limit"
  [totalRecords]="totalRecords"
  [lazy]="isPaginated ? true : false"
  [rowsPerPageOptions]="[5, 10, 20]"
  [showCurrentPageReport]="true"
  currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
  [tableStyle]="{ 'min-width': '60rem' }"
  (onPage)="onPageChange($event)"
  (onLazyLoad)="onSort($event)"
>

  <ng-template #header>
    <tr>
      @for (col of columns; track col) {
        <th
          [pSortableColumn]="col.field"
          class="transition duration-300 hover:bg-gray-100!"
          style="width: 20%;"
        >
          {{col.header}}
          <p-sortIcon [field]="col.field" />
        </th>
      }
      <th> actions </th>
    </tr>
  </ng-template>

  <ng-template #body let-rowData>
    <tr class="transition duration-300 hover:bg-gray-50!">
      @for (col of columns; track col) {
        <td>
          @if (col.isImage) {
            <img [src]="rowData[col.field]" class="size-16" [alt]="rowData['name']">
          } @else {
            {{ rowData[col.field] }}
          }
        </td>
      }
      <td class="space-x-3">
        <button (click)="onView(rowData._id)" class="transition duration-300 hover:text-[#3b82f6] cursor-pointer">
          <i class="fa-solid fa-eye"></i>
        </button>
        <button (click)="onEdit(rowData._id)" class="transition duration-300 hover:text-[#8b5cf6] cursor-pointer">
          <i class="fa-solid fa-pen"></i>
        </button>
        <button (click)="onDelete(rowData._id)" class="transition duration-300 hover:text-[#ef4444] cursor-pointer">
          <i class="fa-solid fa-trash"></i>
        </button>
      </td>
    </tr>
  </ng-template>

  <ng-template #emptymessage>
    <tr>
      <td [attr.colspan]="columns.length + 1">
        @if (loading) {
          <div class="text-center p-6 flex flex-col gap-4">
            <i class="fa-solid fa-spinner text-2xl mx-auto animate-spin text-[#D2A02D]"></i>
            <h3 class="text-lg"> loading... </h3>
          </div>
        } @else {
          <div class="text-center p-6 flex flex-col gap-4">
            <i class="fa-regular fa-face-frown text-2xl mx-auto text-gray-400"></i>
            <h3 class="text-lg"> No Brands Found </h3>
            <p class="text-gray-500"> There are currently no brands available. </p>
          </div>
        }
      </td>
    </tr>
  </ng-template>

</p-table>

<p-confirmDialog />
